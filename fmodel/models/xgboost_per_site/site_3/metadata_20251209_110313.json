{
  "site_id": 3,
  "timestamp": "20251209_110313",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 1.9141206442149499,
    "train_mae": 1.3401562893121817,
    "train_bias": 0.0010187628631857753,
    "train_r2": 0.997692212359437,
    "val_rmse": 4.486246522965609,
    "val_mae": 2.251927331296558,
    "val_bias": 0.2563490542916187,
    "val_r2": 0.9891441364343586,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        36.163330855110424,
        22.92100718907303,
        15.695318425533982,
        11.077234832016753,
        8.888074119863164,
        7.482446244012761,
        6.712847796770758,
        6.17382575842753,
        5.816408688160857,
        5.505326137747492,
        5.1992419838995705,
        5.066804865395337,
        4.886230275681884,
        4.740187760315022,
        4.617364585721019,
        4.479099011389949,
        4.344351411053158,
        4.258624337429512,
        4.160325934778487,
        4.044332303311827,
        3.958388748842105,
        3.8473879821989265,
        3.735496163527035,
        3.649918611957172,
        3.5717352208334066,
        3.4772517074212472,
        3.4220190018333496,
        3.354344521218781,
        3.295618438558062,
        3.2216416112213335,
        3.1618076379331224,
        3.0935139344423312,
        3.034954248288952,
        2.9728231722424465,
        2.9184314715673634,
        2.8536681852543078,
        2.7921628678147052,
        2.7383163811293194,
        2.6832948924171345,
        2.6305990438849984,
        2.572620803427817,
        2.5358762686580385,
        2.4918827694455765,
        2.4516007459881695,
        2.406664413655362,
        2.367132718078507,
        2.336609539098501,
        2.298684289468541,
        2.2594542863777995,
        2.226912089204703,
        2.1852820379100035,
        2.163234124303243,
        2.1328637910334884,
        2.1007010928237015,
        2.071863345764796,
        2.047242548811138,
        2.0146375653440494,
        1.992346620485159,
        1.9665934417402664,
        1.9366615399076346
      ],
      "train_r2": [
        0.17625255970231768,
        0.6690787749475251,
        0.8448336691181366,
        0.9227105967853844,
        0.9502408945787189,
        0.9647349552317475,
        0.9716161809583334,
        0.9759914481283322,
        0.978690804313066,
        0.9809092349703074,
        0.9829730331517139,
        0.983829420403064,
        0.984961480292178,
        0.9858470061563582,
        0.9865709415535884,
        0.987363158040795,
        0.9881120457762723,
        0.9885765866433347,
        0.9890978553258193,
        0.9896973038141559,
        0.9901305235359439,
        0.9906762805575203,
        0.991210709515396,
        0.9916088093310305,
        0.9919644475274298,
        0.9923839552579058,
        0.9926239803982351,
        0.9929128347108649,
        0.9931588190663547,
        0.9934625003180211,
        0.9937030808505096,
        0.9939721646392824,
        0.9941982164055876,
        0.9944333311894711,
        0.9946351667392389,
        0.9948706282507527,
        0.9950893529213009,
        0.9952769289634388,
        0.9954648251392878,
        0.9956412039916759,
        0.9958312218574539,
        0.9959494560610826,
        0.996088778218479,
        0.9962142082689343,
        0.9963517188337534,
        0.9964705872920894,
        0.9965610210354966,
        0.9966717504352647,
        0.996784382772276,
        0.9968763427458507,
        0.9969920388637811,
        0.9970524289730883,
        0.9971346117775705,
        0.9972203779293954,
        0.9972961696225745,
        0.9973600492378997,
        0.997443468878435,
        0.9974997293456747,
        0.9975639488571406,
        0.9976375387996281
      ],
      "val_rmse": [
        39.17152616493968,
        24.94990711312954,
        17.5330422845712,
        12.673491030326353,
        10.527239844085056,
        9.041453055544991,
        8.291854828940483,
        7.81829043917769,
        7.5060493933936625,
        7.242198537188331,
        6.891121223854077,
        6.811824989147216,
        6.667264429176156,
        6.56978342966148,
        6.476828823823415,
        6.40237036171416,
        6.254702336051389,
        6.139845889965533,
        6.0424148886094216,
        5.944429909173561,
        5.901727949392497,
        5.8242529988398655,
        5.7436590487007235,
        5.699113170408963,
        5.627835273079863,
        5.552551741182037,
        5.513473671446183,
        5.456622910835461,
        5.386391858693187,
        5.332610991254133,
        5.293597956563007,
        5.261063986362458,
        5.196673620632395,
        5.154601939351364,
        5.139169837447415,
        5.087369593510332,
        5.043481805279858,
        5.007934055729624,
        4.979030760279016,
        4.939799896776069,
        4.8969374106412085,
        4.874401569681279,
        4.8320980003079095,
        4.806628753363417,
        4.771989711695682,
        4.7530114380184205,
        4.726810002241217,
        4.704881218326813,
        4.677946382834592,
        4.664774812463031,
        4.634745723585103,
        4.629026716733564,
        4.603516729775364,
        4.582528746794769,
        4.567732565852741,
        4.554573155842094,
        4.534652531781963,
        4.5226173708039,
        4.506831905218923,
        4.501553662830177
      ],
      "val_r2": [
        0.17236453567374632,
        0.6642345749311122,
        0.8341892562048301,
        0.9133655483953703,
        0.9402239597849891,
        0.955906500261224,
        0.9629147264281707,
        0.9670297904969289,
        0.9696106827513662,
        0.9717096083523054,
        0.9743859716040117,
        0.9749720620284437,
        0.9760230759853863,
        0.9767190759534402,
        0.9773732100331484,
        0.9778904606638468,
        0.9788985937077062,
        0.9796664574882737,
        0.9803066685372884,
        0.9809401916957037,
        0.9812130413638249,
        0.9817030554887988,
        0.9822059252570937,
        0.9824808645973113,
        0.9829163422872962,
        0.9833703413223986,
        0.9836035919784061,
        0.9839399833423439,
        0.9843507331144064,
        0.9846616757649043,
        0.9848852831754562,
        0.985070499601343,
        0.9854337087170298,
        0.9856686080831756,
        0.9857542916870612,
        0.9860400235082003,
        0.9862798448048947,
        0.9864725695413085,
        0.9866282660912559,
        0.9868381535310926,
        0.9870655724225772,
        0.987184347673324,
        0.9874058293279415,
        0.9875382433203179,
        0.9877172078032932,
        0.9878147112232496,
        0.9879486860963953,
        0.9880602444841728,
        0.9881965602761745,
        0.9882629359667369,
        0.9884135622709134,
        0.9884421386107659,
        0.9885691754570247,
        0.9886731668514054,
        0.9887461934777131,
        0.9888109433846495,
        0.9889086059063578,
        0.9889674018439701,
        0.9890442824442179,
        0.9890699293161611
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 2.089854099830919,
    "train_mae": 1.5753867867557914,
    "train_bias": -0.0008192487764958218,
    "train_r2": 0.995810595614215,
    "val_rmse": 10.711216223282985,
    "val_mae": 4.833258512652281,
    "val_bias": -1.7034198661825874,
    "val_r2": 0.94310135881781,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        29.51951621893267,
        19.219780122788983,
        13.590323260177868,
        10.500522407808432,
        8.675756199765614,
        7.651851346471994,
        7.054539362323745,
        6.658731030863891,
        6.276658931371937,
        5.960234180274025,
        5.795532938624123,
        5.652914448455771,
        5.430431542496739,
        5.294624739490636,
        5.10346022795137,
        4.959565049152324,
        4.805095214088965,
        4.680092730206157,
        4.560740620610942,
        4.446669115553403,
        4.359367656074408,
        4.233751457709142,
        4.109841747073181,
        4.000278420519671,
        3.9194933453576963,
        3.8424140556213375,
        3.7505775699152926,
        3.686570405643495,
        3.5814639477531385,
        3.5165118078327433,
        3.4611933144951204,
        3.3538906350754143,
        3.293546111729028,
        3.2294441144518573,
        3.1781467991430348,
        3.1177371145329817,
        3.0490258696883,
        3.0066015717102696,
        2.9631830797469236,
        2.8941662350988673,
        2.829655982152401,
        2.783585783032195,
        2.729086949634036,
        2.6598739658590826,
        2.624814066904175,
        2.595290150492017,
        2.5626709522148237,
        2.5228018146696374,
        2.4878160611057147,
        2.4386941651578353,
        2.3863404690307854,
        2.354485374049474,
        2.323146981083385,
        2.295479053495529,
        2.2602907297111896,
        2.2322257869783493,
        2.1995659689703095,
        2.16864168679845,
        2.131712745325091,
        2.106346310406683
      ],
      "train_r2": [
        0.16412984379875972,
        0.6456624500716664,
        0.8228341868032517,
        0.8942349546231962,
        0.92780036093088,
        0.9438365992785396,
        0.9522627199822322,
        0.9574692253306762,
        0.9622099550815169,
        0.9659241266538836,
        0.9677813673668421,
        0.9693475513384784,
        0.9717128603549606,
        0.9731100052672751,
        0.9750166991857382,
        0.9764056765068243,
        0.9778525187107612,
        0.9789898446162898,
        0.9800477859515575,
        0.9810333785612892,
        0.9817708111851196,
        0.9828062318434785,
        0.9837979284165835,
        0.9846502683710043,
        0.9852639797101201,
        0.985837866871902,
        0.9865067473566298,
        0.9869633678064906,
        0.9876961361852358,
        0.9881383663101061,
        0.9885086233317151,
        0.9892100820617705,
        0.9895948620018862,
        0.9899959490492358,
        0.9903112387333072,
        0.9906760629242611,
        0.9910825113273989,
        0.9913289416586539,
        0.9915775717836222,
        0.9919653438963778,
        0.9923195330265129,
        0.9925675915676376,
        0.9928557755009686,
        0.9932135529423206,
        0.9933912786953712,
        0.9935391124096901,
        0.9937005005782859,
        0.9938949866578778,
        0.9940631389780563,
        0.994295270894794,
        0.994537579105694,
        0.9946824406977539,
        0.9948230529468667,
        0.994945630169728,
        0.9950994033857063,
        0.9952203445626968,
        0.9953591841946121,
        0.9954887598013296,
        0.9956410919116325,
        0.9957442128334184
      ],
      "val_rmse": [
        47.27942656076448,
        32.53072785652177,
        24.423291819350297,
        20.283900251931904,
        17.543685144770183,
        15.866103902351691,
        14.958652435727933,
        14.172779979038962,
        13.554933049734638,
        13.00777628124318,
        12.903535832970972,
        12.730944282403199,
        12.50256261107295,
        12.40627600573112,
        12.167556554200738,
        12.00840196164825,
        11.916534670429096,
        11.805561052010326,
        11.762703445014546,
        11.719283420013156,
        11.659251584605961,
        11.608566901209114,
        11.517481106917472,
        11.519205946272917,
        11.360296903692639,
        11.334250297791646,
        11.25144579143705,
        11.274028289962063,
        11.24582346464281,
        11.328969085654508,
        11.259009525287397,
        11.2092902657701,
        11.136723154554323,
        11.093533602767634,
        11.082344682545557,
        11.05320282235214,
        11.044254061294978,
        10.984071327614197,
        11.010034998661904,
        10.948981992231683,
        10.921303681477637,
        10.902443686224865,
        10.895244356158129,
        10.859356921736138,
        10.8300518411279,
        10.86103401130116,
        10.864176664445678,
        10.859822950956291,
        10.81700229944119,
        10.800707435594521,
        10.77727209518628,
        10.759274771341815,
        10.771698861019974,
        10.742055508181943,
        10.728208668230842,
        10.720117140494889,
        10.71522820195743,
        10.726261864930127,
        10.719638156626734,
        10.718784914558967
      ],
      "val_r2": [
        -0.10858429870752873,
        0.4751781796603679,
        0.704176466985694,
        0.7959543903608162,
        0.8473608386287584,
        0.8751567947388863,
        0.889029059898345,
        0.9003827812116496,
        0.9088788743650189,
        0.9160867696416285,
        0.9174262920965942,
        0.9196204524671073,
        0.9224784587625456,
        0.9236679018774991,
        0.9265771785525885,
        0.9284853930858352,
        0.9295754170085938,
        0.9308809778732322,
        0.9313819111051823,
        0.9318875601978314,
        0.9325835826302749,
        0.9331684491045918,
        0.9342131125421954,
        0.9341934067908799,
        0.9359965055593988,
        0.9362896603417871,
        0.9372171557639561,
        0.9369648830653567,
        0.9372798850310678,
        0.9363490183798338,
        0.9371327164219371,
        0.9376867284378607,
        0.9384909287037995,
        0.9389670827707751,
        0.939090136088884,
        0.9394100490686756,
        0.939508117567973,
        0.940165590255273,
        0.9398823879784068,
        0.9405472695131633,
        0.9408474748158824,
        0.9410515993596085,
        0.9411294257414013,
        0.941516610151383,
        0.9418318310162282,
        0.9414985447249864,
        0.9414646848952934,
        0.9415115904152084,
        0.9419719246449924,
        0.942146621360368,
        0.9423974091370456,
        0.9425896334530554,
        0.9424569696115422,
        0.942773246786869,
        0.9429206857889906,
        0.9430067550843704,
        0.9430587270789544,
        0.9429413997997454,
        0.9430118479830175,
        0.9430209196984589
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}