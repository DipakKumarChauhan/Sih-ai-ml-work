{
  "site_id": 7,
  "timestamp": "20251209_110313",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 1.83266279608141,
    "train_mae": 1.3238935333774233,
    "train_bias": -0.00139797063507489,
    "train_r2": 0.9975563427579576,
    "val_rmse": 4.393005320901452,
    "val_mae": 2.1745351353360385,
    "val_bias": 0.3544396471734939,
    "val_r2": 0.9881857482582336,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        33.660875896791296,
        21.36385066332765,
        14.754376707305548,
        10.582694227623694,
        8.559610855121546,
        7.321453036007117,
        6.568379499376092,
        6.039507558606942,
        5.687804709187943,
        5.395262536999866,
        5.095749545942954,
        4.948774076336251,
        4.74663951054036,
        4.602462503107242,
        4.482898056380268,
        4.339754555063447,
        4.209571049183497,
        4.0634545401757345,
        3.9836796829402767,
        3.88714168344609,
        3.8098315376553944,
        3.7057640942503207,
        3.5898432329182404,
        3.5035310649961073,
        3.4154913336023403,
        3.3284084100784326,
        3.2746379048387966,
        3.206496619545488,
        3.1363272644045783,
        3.080626654115025,
        3.017569772205848,
        2.959813268949127,
        2.8951420513739343,
        2.8390898220192886,
        2.788170169003912,
        2.738883299823557,
        2.6664159410217563,
        2.608457727459033,
        2.554937602932347,
        2.516022908938611,
        2.4590452281292783,
        2.4263613145903307,
        2.3713518044529156,
        2.3336049849408522,
        2.298104610377775,
        2.268031298346502,
        2.2281532227322995,
        2.1890095754511956,
        2.148827527147475,
        2.1108481163619386,
        2.0750044177774924,
        2.0538256576871916,
        2.025379126138069,
        1.9964890544269225,
        1.9760504509093635,
        1.9527667546998864,
        1.9188346833484213,
        1.8994734067659835,
        1.8757920020583336,
        1.8511674253298553
      ],
      "train_r2": [
        0.1756227693924618,
        0.6679264922324454,
        0.8416139609732365,
        0.9185168783508433,
        0.9466931273733645,
        0.960999540442732,
        0.9686099768069193,
        0.9734613870254784,
        0.9764622733129604,
        0.9788212498038331,
        0.9811074181858815,
        0.9821815296790963,
        0.9836074067606231,
        0.9845881178098577,
        0.9853784676841051,
        0.9862973205580082,
        0.9871070929823592,
        0.9879865990053482,
        0.988453669511083,
        0.9890065019436621,
        0.9894394458491976,
        0.9900084998139551,
        0.9906238158207814,
        0.9910692669505037,
        0.9915124657834233,
        0.9919397523789116,
        0.9921980757047275,
        0.9925193947882944,
        0.9928432160055084,
        0.9930951650783885,
        0.9933749401808084,
        0.9936261213870478,
        0.9939016138904777,
        0.9941354670831554,
        0.994343943809674,
        0.9945421421713648,
        0.9948271372348406,
        0.995049571769866,
        0.9952506326853134,
        0.9953942077468451,
        0.9956004506264461,
        0.9957166248892646,
        0.9959086452210971,
        0.9960378596958143,
        0.9961574922622602,
        0.9962574014106242,
        0.9963878542335289,
        0.9965136540066682,
        0.9966404718820827,
        0.9967581782384319,
        0.9968673403439048,
        0.9969309616679398,
        0.9970153884024782,
        0.9970999263335073,
        0.9971590000924497,
        0.997225556352507,
        0.9973211383663947,
        0.9973749257128586,
        0.9974399731382034,
        0.9975067457865754
      ],
      "val_rmse": [
        36.83524965166632,
        23.4238430762543,
        16.36473445801115,
        11.87682808872081,
        9.631426153415413,
        8.360376012354498,
        7.7523685036146475,
        7.366200787106616,
        7.074693994414716,
        6.836227160550549,
        6.489177618962796,
        6.329990949766227,
        6.151896911452002,
        6.017636484215449,
        5.9391917224728346,
        5.837370430700828,
        5.701008672974433,
        5.640156475194724,
        5.582779095637167,
        5.519987537861272,
        5.46694053526429,
        5.410085446318754,
        5.3186201631260595,
        5.290986047311036,
        5.250653586039659,
        5.173392527529167,
        5.136758699122771,
        5.114805711575922,
        5.0573251383801,
        5.040586695993039,
        5.0005400383975385,
        4.969481905727325,
        4.919835068540359,
        4.8940045750260355,
        4.8702039238037464,
        4.842009739131141,
        4.804599868854554,
        4.780953436072469,
        4.750344756185215,
        4.710063110816148,
        4.681413890986962,
        4.652827049645189,
        4.629524696133806,
        4.6102404088476625,
        4.6006601036870425,
        4.5989819187614,
        4.578866753860787,
        4.532092256330254,
        4.516048203284571,
        4.50062912559041,
        4.488508708725356,
        4.480173222157363,
        4.4721644572387715,
        4.457247407690049,
        4.450673020049939,
        4.443322133116894,
        4.430200746164042,
        4.419685136138067,
        4.408039967281228,
        4.402208919835594
      ],
      "val_r2": [
        0.1693654387182012,
        0.6641084627783538,
        0.8360540519876398,
        0.913645752755938,
        0.943211034108316,
        0.9572107786920331,
        0.963208153979908,
        0.9667822763762842,
        0.9693593423983989,
        0.9713901399765784,
        0.9742212363109857,
        0.9754704861905913,
        0.9768313429674375,
        0.9778315841089098,
        0.9784057834632645,
        0.9791398575493526,
        0.9801030657175387,
        0.980525555981029,
        0.9809197680732079,
        0.9813465590521194,
        0.9817033549829935,
        0.9820819389967574,
        0.9826826787531624,
        0.9828621635221058,
        0.9831224464319591,
        0.9836154836905223,
        0.9838467061968577,
        0.9839844799653991,
        0.9843424245452251,
        0.9844458981021855,
        0.9846920660386906,
        0.9848816293197582,
        0.9851821958693341,
        0.9853373825426324,
        0.9854796510079814,
        0.9856472843989543,
        0.9858682087905251,
        0.9860069692031526,
        0.9861855683658356,
        0.9864188603540569,
        0.9865835739548104,
        0.9867469272653555,
        0.9868793432975309,
        0.9869884238391017,
        0.9870424450352818,
        0.9870518963778833,
        0.987164914282719,
        0.987425803413453,
        0.9875146736190924,
        0.9875997850098576,
        0.9876664838618314,
        0.9877122497969336,
        0.9877561417355739,
        0.9878376850855934,
        0.9878735371690327,
        0.9879135610679741,
        0.9879848395723929,
        0.9880418107116954,
        0.9881047435549244,
        0.988136193327885
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 1.3666083098597581,
    "train_mae": 1.0141343116952268,
    "train_bias": -0.0011097518554789834,
    "train_r2": 0.9962094384394389,
    "val_rmse": 5.684700752030737,
    "val_mae": 2.740665653866481,
    "val_bias": -0.40852533165032295,
    "val_r2": 0.9602756934522758,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        20.368407475492724,
        13.553997912647409,
        9.867792997966001,
        7.816247849852225,
        6.565485360436025,
        5.802332940557136,
        5.353434144863948,
        5.069314082163989,
        4.753816550943981,
        4.461313504648714,
        4.355809625646178,
        4.1752415390856426,
        3.9839169131833003,
        3.872116643257096,
        3.733175902562317,
        3.603480962384276,
        3.452637294404394,
        3.333940515043474,
        3.2379550468820897,
        3.160909754892649,
        3.0573313574610714,
        2.959501755932207,
        2.854754924279492,
        2.804589025539249,
        2.715736748217016,
        2.6570600790980907,
        2.5936517404733563,
        2.548852473786613,
        2.4588044161235856,
        2.419783464434703,
        2.370350343018995,
        2.3043884925221794,
        2.2395929430571653,
        2.198286886762491,
        2.1576085465439006,
        2.1064822469537017,
        2.0534019548621303,
        2.022010409191602,
        1.9929166182000693,
        1.9371903854404426,
        1.9048204396366433,
        1.8727319350257228,
        1.8336889131436909,
        1.7901331254674024,
        1.7536594480175685,
        1.7239039860353413,
        1.7029252922314344,
        1.6722046906630772,
        1.642525568944367,
        1.611950971711587,
        1.5838088178234775,
        1.5613050940914979,
        1.536256739922574,
        1.5149288364433056,
        1.4929057933560346,
        1.4674919178687862,
        1.4462894648689435,
        1.4196779362569478,
        1.396313594328721,
        1.3813898331228962
      ],
      "train_r2": [
        0.15796607563816423,
        0.6271361593614152,
        0.8023688031262235,
        0.8760027412257896,
        0.9125118739243815,
        0.9316685352690628,
        0.9418325039559337,
        0.9478428515441444,
        0.954133006214996,
        0.9596037616711561,
        0.96149179985354,
        0.9646183038085426,
        0.9677866430762481,
        0.9695692747621528,
        0.9717139472167918,
        0.973645189140583,
        0.9758054608334602,
        0.9774404135898612,
        0.978720713103341,
        0.9797213222753975,
        0.9810285528138412,
        0.9822232385822062,
        0.9834593298424915,
        0.9840355522282369,
        0.9850310692976894,
        0.9856709239179141,
        0.9863466644931977,
        0.9868142499567716,
        0.9877294675373409,
        0.9881158411241943,
        0.9885964381949872,
        0.9892222815188044,
        0.9898198630479267,
        0.990191915962041,
        0.9905515461249286,
        0.9909940185837876,
        0.991442175378403,
        0.9917018321772951,
        0.9919389113541114,
        0.992383419269949,
        0.9926358347561682,
        0.9928818575878241,
        0.9931755641122075,
        0.9934959166536712,
        0.9937582559121572,
        0.9939682742408056,
        0.9941141846760123,
        0.9943246282450288,
        0.9945242991000429,
        0.9947262553648691,
        0.9949087906805822,
        0.9950524408713307,
        0.9952099169601132,
        0.9953419954908637,
        0.995476441131044,
        0.9956291402029296,
        0.9957545289356536,
        0.9959093237857409,
        0.9960428603928313,
        0.9961269959559532
      ],
      "val_rmse": [
        31.232510076008687,
        21.47814143132187,
        16.12623069637671,
        13.11166679922864,
        11.30971893048128,
        10.075332605196216,
        9.456824783914806,
        9.011489194651103,
        8.640426749723623,
        8.263355860174618,
        8.139314601408781,
        7.951573802911324,
        7.696934234307108,
        7.636472712260389,
        7.418621733476701,
        7.276497033619337,
        7.1642530505071615,
        7.0161282325123615,
        6.985551624578679,
        6.9307879968371875,
        6.841902715190529,
        6.762987526106733,
        6.627563243604334,
        6.564912714400706,
        6.4923170177855996,
        6.45780394538636,
        6.429567363741334,
        6.411926691018286,
        6.354964260013888,
        6.335401016043942,
        6.288839004450021,
        6.202517628109418,
        6.168640775073517,
        6.146637375317052,
        6.152241720960812,
        6.134962106194679,
        6.105540585515017,
        6.0525442951522885,
        6.044641466353577,
        6.009004223729943,
        5.972471671705945,
        5.951955396376378,
        5.931099100110847,
        5.902813480579128,
        5.89853424420712,
        5.872065015776662,
        5.866251535788915,
        5.848853013011109,
        5.8252571856377315,
        5.8060878349285545,
        5.782715633341639,
        5.77260483588272,
        5.770861368255047,
        5.759330645312868,
        5.753392757872599,
        5.740059482844226,
        5.733447883205733,
        5.717883736173656,
        5.70954104108674,
        5.693964029923212
      ],
      "val_r2": [
        -0.19909857323459446,
        0.432932830547337,
        0.6803263458285566,
        0.7886720612350934,
        0.8427666264414501,
        0.8752157156817576,
        0.890066059877762,
        0.9001761670997617,
        0.9082277257582059,
        0.9160628883480777,
        0.9185639352337945,
        0.9222774041438138,
        0.9271756427376929,
        0.928315259547113,
        0.9323469214848148,
        0.9349142637452164,
        0.9369067435605056,
        0.9394887471803004,
        0.9400150195347536,
        0.9409518442447754,
        0.9424566822689474,
        0.9437764477121077,
        0.9460055812832383,
        0.9470215776710582,
        0.9481867845261767,
        0.9487361970516867,
        0.9491835162826558,
        0.9494619820454849,
        0.9503559352244869,
        0.9506611152483047,
        0.9513836821870139,
        0.9527091496544879,
        0.9532243243659616,
        0.953557424741991,
        0.9534726958449231,
        0.953733688465101,
        0.9541763843432325,
        0.9549684327973327,
        0.9550859517824114,
        0.9556139878936517,
        0.9561520487995662,
        0.9564527790729622,
        0.956757432722435,
        0.9571688998652133,
        0.957230978047513,
        0.9576139623420062,
        0.9576978471099843,
        0.9579484001367229,
        0.9582870103922383,
        0.958561091089279,
        0.9588940413275476,
        0.9590376592082646,
        0.9590623987261732,
        0.9592258296311461,
        0.9593098628772626,
        0.9594982401225381,
        0.9595914890520306,
        0.9598105789863547,
        0.9599277704156184,
        0.9601461256463077
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}