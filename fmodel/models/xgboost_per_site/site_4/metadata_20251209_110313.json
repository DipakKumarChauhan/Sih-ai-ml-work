{
  "site_id": 4,
  "timestamp": "20251209_110313",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 1.8907970214612932,
    "train_mae": 1.3826819904584422,
    "train_bias": 0.0014765143571185224,
    "train_r2": 0.9972732234107952,
    "val_rmse": 3.4195175245724942,
    "val_mae": 2.137626279890219,
    "val_bias": 0.14898562624190856,
    "val_r2": 0.9924948737254986,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        32.84872655199963,
        20.673194197001084,
        14.094531984455797,
        9.983416772877051,
        7.9542862736865745,
        6.7663480188876415,
        6.096153982431093,
        5.646470547013294,
        5.333358493692451,
        5.0880469740320695,
        4.868542589639642,
        4.738405468812896,
        4.57624804643299,
        4.435628619099723,
        4.333979563062417,
        4.22455442817376,
        4.11254314074785,
        4.002786625183201,
        3.9326676612211933,
        3.8362589686780733,
        3.7739748635027914,
        3.6720530636937507,
        3.5616513311191884,
        3.4878888508269705,
        3.4179357383641498,
        3.343746842764517,
        3.2976188515047937,
        3.240581169688948,
        3.193452080444595,
        3.1286862676065867,
        3.0600347457591694,
        3.0009449246397315,
        2.949532408480256,
        2.898316752974143,
        2.8523302125355174,
        2.79252844635084,
        2.731892085847932,
        2.6667764319275515,
        2.613790674647832,
        2.561615237306501,
        2.510697557646654,
        2.475263073177597,
        2.427103064705357,
        2.39037823017308,
        2.352878361959775,
        2.315428331425095,
        2.2803575653958044,
        2.2418995343165897,
        2.201685050734698,
        2.173662678913652,
        2.1426862262621404,
        2.1169888109480106,
        2.090897489059012,
        2.0639003186882405,
        2.039952921884609,
        2.016251035789355,
        1.9819230753813324,
        1.9608948214010824,
        1.9338461639326219,
        1.9107120900919599
      ],
      "train_r2": [
        0.17700572615749832,
        0.6740320462319158,
        0.8484831067993591,
        0.9239817020964775,
        0.9517427941678066,
        0.9650804691235904,
        0.9716553176539517,
        0.9756827829084627,
        0.9783049182375407,
        0.9802547806792568,
        0.9819216960134812,
        0.9828752523895091,
        0.9840272810261286,
        0.9849938220725908,
        0.9856737193116123,
        0.9863880120058686,
        0.9871002684885268,
        0.9877796226198684,
        0.9882040144574641,
        0.9887752785815835,
        0.989136800779122,
        0.9897156313797746,
        0.9903247422977361,
        0.9907213453385229,
        0.9910897985304309,
        0.9914724059813725,
        0.9917060645301211,
        0.9919904974152476,
        0.9922217742238612,
        0.9925340724759367,
        0.9928581215701965,
        0.9931312803979362,
        0.9933646156743834,
        0.9935930485649284,
        0.9937947491618574,
        0.9940522192729903,
        0.9943077126194383,
        0.9945758342218679,
        0.9947892366956596,
        0.9949951907061889,
        0.9951921762562648,
        0.9953269280954219,
        0.9955070025202096,
        0.9956419421836059,
        0.9957776066459987,
        0.9959109499751846,
        0.9960338819272099,
        0.99616653033244,
        0.9963028240022083,
        0.9963963381247564,
        0.9964983164704618,
        0.9965818047766289,
        0.9966655422430797,
        0.996751093792364,
        0.9968260503907493,
        0.9968993771394503,
        0.9970040585198842,
        0.9970672952886779,
        0.9971476449467048,
        0.9972154806451679
      ],
      "val_rmse": [
        36.40043865991588,
        22.66093348546965,
        15.208151242538483,
        10.58054396891337,
        8.271331231536966,
        7.07752728505124,
        6.4485436126751425,
        6.083760379256744,
        5.868073100909158,
        5.674157420726593,
        5.497230672372663,
        5.355674742431658,
        5.213667823963196,
        5.109617124872293,
        5.035294101117367,
        4.960875267531474,
        4.877543993951438,
        4.818563881439374,
        4.777141292510483,
        4.699806008245448,
        4.650683231379171,
        4.586872113522423,
        4.51514096163172,
        4.47961470354696,
        4.407922420515379,
        4.34640718618577,
        4.316994790291806,
        4.279858551818742,
        4.25287088793557,
        4.204553921088316,
        4.16884568669603,
        4.129087247219941,
        4.097741191775882,
        4.067901322480891,
        4.0493685094892315,
        4.018739762159788,
        3.9740949575126345,
        3.922749973953708,
        3.8879459296323216,
        3.8603952641666313,
        3.8223417157550954,
        3.794327474143487,
        3.756872002132604,
        3.7356492380160757,
        3.705118765190207,
        3.6890063880410024,
        3.6738500584598324,
        3.646142400390637,
        3.633315835952063,
        3.6103415373264602,
        3.5788958369706463,
        3.5650790719405463,
        3.556375528363242,
        3.531825041584412,
        3.516544758308344,
        3.509340596496271,
        3.4814960468091294,
        3.4737547891915086,
        3.4446054654838862,
        3.42807279116962
      ],
      "val_r2": [
        0.1495641278743297,
        0.6704024853329174,
        0.851549665039401,
        0.928147095418765,
        0.9560884101054211,
        0.9678492253965911,
        0.9733098128572546,
        0.97624404267158,
        0.9778986212608838,
        0.9793352052036168,
        0.9806038176602779,
        0.9815898755704938,
        0.9825532293680547,
        0.9832426610766244,
        0.9837266104784016,
        0.9842040790615614,
        0.9847302921928878,
        0.9850973473848254,
        0.9853524661892702,
        0.9858228739607359,
        0.9861176862478727,
        0.9864960257972887,
        0.9869150832764464,
        0.9871201839908991,
        0.98752914525507,
        0.987874793147324,
        0.988038341888217,
        0.9882432531209767,
        0.9883910555610058,
        0.9886533361465987,
        0.988845246555483,
        0.9890569985874523,
        0.9892225159945329,
        0.9893789083841495,
        0.9894754644722854,
        0.9896340740062242,
        0.9898631080787976,
        0.9901233516232045,
        0.9902978324774215,
        0.9904348478089512,
        0.9906224938739052,
        0.9907594471102841,
        0.9909409817691706,
        0.9910430424041439,
        0.9911888498257738,
        0.991265316949085,
        0.991336942621135,
        0.9914671209791391,
        0.9915270500772876,
        0.9916338641557246,
        0.9917789658325497,
        0.9918423199183851,
        0.99188210251757,
        0.9919937951281332,
        0.9920629222417465,
        0.9920954094845246,
        0.9922203483876458,
        0.9922549067101823,
        0.9923843441732326,
        0.9924572727032044
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 1.413062180038102,
    "train_mae": 1.063373592507983,
    "train_bias": 0.0029576977110061763,
    "train_r2": 0.9958110778458527,
    "val_rmse": 4.051428758914618,
    "val_mae": 2.220779567029741,
    "val_bias": -0.41049649265077376,
    "val_r2": 0.9779605142740903,
    "best_iteration": 290,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286
      ],
      "train_rmse": [
        20.071383907359827,
        13.4861607939001,
        9.985020319120357,
        8.036897256408945,
        6.792868596485862,
        6.106878518358229,
        5.648841443761738,
        5.360381058369112,
        5.018038639701537,
        4.70969041124401,
        4.602912060635921,
        4.445194003622282,
        4.22570613733624,
        4.110931144608835,
        3.8994979892464983,
        3.7766164219816427,
        3.617475282585611,
        3.5278892044189782,
        3.4316777011674424,
        3.3471728458367376,
        3.2442837425719326,
        3.1131141459953064,
        3.0017404557760687,
        2.916664861324246,
        2.832606317848041,
        2.757984899243705,
        2.6846658228643445,
        2.6371967387412782,
        2.557253034379178,
        2.4995170226388783,
        2.424122141822494,
        2.346466482295717,
        2.284681899559628,
        2.230784187105033,
        2.18623071085017,
        2.143241749449153,
        2.084743573469184,
        2.0523194790885824,
        2.0193467626278654,
        1.971833419386568,
        1.9250245612191732,
        1.8784493133468885,
        1.8395169075564526,
        1.8028485111205732,
        1.7719922941422979,
        1.7460447561328845,
        1.7239278424441868,
        1.6960498967423092,
        1.6629953276715377,
        1.6306994276103022,
        1.595556496267249,
        1.5763628408112398,
        1.5521005022784016,
        1.536848909403905,
        1.5116554129016457,
        1.480230340021154,
        1.4613890245567875,
        1.4339535809430521
      ],
      "train_r2": [
        0.15484886405632514,
        0.6184456486478698,
        0.7908404735608479,
        0.8644946080930538,
        0.903197589708817,
        0.9217618981172149,
        0.9330580262030618,
        0.9397203014679246,
        0.947173997672302,
        0.9534666344920605,
        0.9555527291769998,
        0.9585465020231505,
        0.9625390895455299,
        0.9645464156111357,
        0.9680995253229753,
        0.9700783527672223,
        0.9725469318209297,
        0.9738898348575298,
        0.975294552246216,
        0.9764963114742031,
        0.9779190677900023,
        0.9796684806716234,
        0.9810972051595412,
        0.98215351041461,
        0.9831673620315967,
        0.9840425492830528,
        0.9848797068247261,
        0.9854096804426297,
        0.9862808517507049,
        0.9868933427770777,
        0.9876721102797841,
        0.9884492960218995,
        0.9890495686742494,
        0.9895601355810195,
        0.98997298359829,
        0.990363439218279,
        0.9908823056079825,
        0.9911637157457436,
        0.9914453637272962,
        0.9918431929385031,
        0.9922258611350212,
        0.9925974950635494,
        0.992901161242678,
        0.9931813528844567,
        0.9934127612901663,
        0.9936042646110987,
        0.9937652662557093,
        0.9939652818196438,
        0.9941982127142054,
        0.9944213696989396,
        0.9946592270308101,
        0.9947869472258265,
        0.9949461840372653,
        0.9950450178941245,
        0.9952061399536851,
        0.995403382701071,
        0.9955196553163057,
        0.9956863000876931
      ],
      "val_rmse": [
        30.1153741967195,
        20.071656398099012,
        14.45227413135377,
        11.280954670766882,
        9.191391872780077,
        8.101254874684734,
        7.445143137677724,
        7.037016818934523,
        6.577977005297181,
        6.248237413668908,
        6.190799447962211,
        6.047708112311724,
        5.842534681876762,
        5.780756737458134,
        5.60065779882373,
        5.541805269337197,
        5.385182100316792,
        5.258187746037087,
        5.244992072944439,
        5.127301729288553,
        5.026874829411944,
        4.939260951342646,
        4.865692479056804,
        4.831701705684714,
        4.761368038918833,
        4.7235483233951605,
        4.665996649986434,
        4.644621920886228,
        4.6000501981704565,
        4.579991233610079,
        4.55033396794127,
        4.479616657622022,
        4.446065931599622,
        4.422000352772908,
        4.406786452758945,
        4.382552341767941,
        4.346146095558573,
        4.3209668087442195,
        4.304147903903367,
        4.272790925857929,
        4.250334356314352,
        4.227296053123746,
        4.216449701207723,
        4.197939311251145,
        4.191926397415128,
        4.188550975420273,
        4.187619668272212,
        4.1900470471171625,
        4.169106685383352,
        4.160380357882144,
        4.151561555819708,
        4.144208669730411,
        4.1365547828313085,
        4.111036508971793,
        4.101822146036597,
        4.080838036972828,
        4.060900580972562,
        4.053273314849714
      ],
      "val_r2": [
        -0.21775962502133983,
        0.4590570429411054,
        0.7195487212477847,
        0.8291256988138029,
        0.8865648608138622,
        0.9118769267087785,
        0.9255728915395464,
        0.9335090985049033,
        0.941900854479755,
        0.9475796291271511,
        0.9485389653610823,
        0.9508903671332195,
        0.9541660125638299,
        0.9551301692634728,
        0.9578824481478238,
        0.9587629522427559,
        0.9610609070916407,
        0.9628757900016108,
        0.9630618861531004,
        0.9647009681649368,
        0.9660702088976172,
        0.9672426330243838,
        0.9682111836279556,
        0.9686537731605915,
        0.9695597266552165,
        0.9700413824688535,
        0.9707669662151597,
        0.9710341832851394,
        0.9715874518249773,
        0.9718347029039858,
        0.9721982849231474,
        0.9730557099448365,
        0.973457804696336,
        0.97374436121054,
        0.9739247155643064,
        0.9742107170840926,
        0.9746374050894662,
        0.9749304289070151,
        0.9751252103758135,
        0.9754863303892057,
        0.9757433269607965,
        0.9760055736486198,
        0.97612854498209,
        0.9763376782855682,
        0.9764054151412691,
        0.9764433974952594,
        0.9764538717587768,
        0.9764265665384705,
        0.9766616009948869,
        0.9767591976218546,
        0.9768576207440689,
        0.9769395237037102,
        0.9770246252521821,
        0.977307219598222,
        0.9774088315295466,
        0.9776393841664627,
        0.9778573417281909,
        0.9779404411981494
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}