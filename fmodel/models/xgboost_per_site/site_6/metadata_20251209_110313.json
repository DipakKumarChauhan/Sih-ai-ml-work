{
  "site_id": 6,
  "timestamp": "20251209_110313",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 1.3750284965712336,
    "train_mae": 0.9281765573199656,
    "train_bias": -0.0025050168357438145,
    "train_r2": 0.9972845608838938,
    "val_rmse": 2.699534998262297,
    "val_mae": 1.3699375338224387,
    "val_bias": -0.012239631100975295,
    "val_r2": 0.9893986872452337,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        23.998325751735234,
        15.483477243653297,
        10.890248796043178,
        7.961967697539099,
        6.498863839995275,
        5.591567795184124,
        4.994668095354403,
        4.563134757112598,
        4.25342530532266,
        4.015526035424396,
        3.7968586573081953,
        3.674049412679046,
        3.5273365600858257,
        3.4029745983602804,
        3.2913902461440827,
        3.2083515273261844,
        3.0997783526014504,
        3.018638416298721,
        2.94815155662982,
        2.871354193483305,
        2.8110940110075995,
        2.7469763598895005,
        2.6610090614764177,
        2.5972232615977053,
        2.5407245271188987,
        2.4751009135026165,
        2.423371233213517,
        2.3822171423009886,
        2.335623354345234,
        2.2836536741957953,
        2.2318375896658043,
        2.1878826086918983,
        2.1422948918194638,
        2.1072260081979266,
        2.066913752015492,
        2.02485797533257,
        1.9792373757696171,
        1.9377109407384634,
        1.9021865642211715,
        1.8648139114135236,
        1.829340805029218,
        1.8035005901426102,
        1.7719381416616644,
        1.7395863070417377,
        1.716423192728338,
        1.6844057333391367,
        1.655704323323026,
        1.6300491893511073,
        1.6060206381389925,
        1.5819872434122588,
        1.5567919338778664,
        1.5390035550225114,
        1.5193244754303155,
        1.4977010379934463,
        1.4818578731863856,
        1.4669020600560576,
        1.4435845053907164,
        1.4291747092647198,
        1.4087671758559839,
        1.3910211112722135
      ],
      "train_r2": [
        0.17286088184331272,
        0.6556868000382223,
        0.8296695571306836,
        0.908954707636159,
        0.9393415165240888,
        0.9550961206768238,
        0.9641713916204373,
        0.9700950375708898,
        0.9740167008552911,
        0.976841972545671,
        0.9792954625352693,
        0.9806131764282837,
        0.9821305793713222,
        0.9833683978750002,
        0.984441224014677,
        0.9852163876936718,
        0.9862000359712696,
        0.986913037385504,
        0.9875170772282602,
        0.9881589501911613,
        0.9886507434829765,
        0.989162564738052,
        0.9898302710218375,
        0.990311975239391,
        0.9907288878955216,
        0.9912016244958547,
        0.9915655538691198,
        0.9918495917431206,
        0.9921653014573636,
        0.9925100803932116,
        0.9928461167528215,
        0.9931251266087187,
        0.9934086378045237,
        0.9936226697418985,
        0.993864338641038,
        0.9941114847215623,
        0.9943738353276733,
        0.9946074441084246,
        0.9948033568891949,
        0.9950055499625462,
        0.9951937548832244,
        0.9953285764068437,
        0.9954906516565177,
        0.9956538107496015,
        0.9957687818135503,
        0.9959251643761574,
        0.9960628474908828,
        0.9961839145352563,
        0.9962955911247591,
        0.9964056312758719,
        0.9965192100385871,
        0.9965983007179133,
        0.9966847388791431,
        0.9967784347364206,
        0.9968462317539022,
        0.9969095700125611,
        0.9970070387352722,
        0.9970664917299297,
        0.9971496701537026,
        0.9972210283595961
      ],
      "val_rmse": [
        23.839595322156917,
        15.232688194347217,
        10.971620528784758,
        8.10732999650949,
        6.7380533651530925,
        5.939415380383845,
        5.4355334417319465,
        5.014271131545765,
        4.76356291704073,
        4.542070447006299,
        4.313595568768117,
        4.191006619278759,
        4.058797930926289,
        3.9511587777599675,
        3.894702380231258,
        3.837573719692976,
        3.7459274882716755,
        3.6879765958769792,
        3.646822435066637,
        3.604299404192188,
        3.560033862817408,
        3.511270783419043,
        3.469088213198543,
        3.429125564279763,
        3.398508175043736,
        3.349558425691535,
        3.3176202032644806,
        3.3033909556836605,
        3.2718524195490217,
        3.244273166278323,
        3.1989066891517246,
        3.1701908179630283,
        3.1538728130016658,
        3.132421721552651,
        3.0954299395364924,
        3.060679868144248,
        3.0269215804963663,
        2.995533416401987,
        2.9817250283670966,
        2.9650002217750373,
        2.942542807622119,
        2.9390108563303077,
        2.9167517473505518,
        2.892860397938689,
        2.8831470382498634,
        2.866468795259077,
        2.8577878184846215,
        2.833611750110354,
        2.8212517020924515,
        2.8106106245952382,
        2.7908894957742754,
        2.7853074632296377,
        2.7794812777572067,
        2.7728115625671323,
        2.7646545680752572,
        2.754651144793132,
        2.7353363582061703,
        2.7278094956438967,
        2.7145975726570737,
        2.7084634411204225
      ],
      "val_r2": [
        0.17323995461634623,
        0.6624525532739111,
        0.8248850278827865,
        0.9043824913432263,
        0.9339533772741079,
        0.9486820710636875,
        0.9570200340994989,
        0.9634239039385318,
        0.9669899992667876,
        0.9699883789496717,
        0.9729317255481743,
        0.9744483814161644,
        0.9760350469162683,
        0.9772892912962478,
        0.9779336615792084,
        0.9785762651244296,
        0.9795872998999784,
        0.9802139986145634,
        0.9806531190937366,
        0.9811016693785826,
        0.9815630116850311,
        0.9820646288554425,
        0.9824929726892209,
        0.982893998789721,
        0.9831981013620142,
        0.9836786214579132,
        0.9839883880334258,
        0.9841254408541276,
        0.9844271129124356,
        0.984688541858181,
        0.9851137651380051,
        0.9853798263816468,
        0.9855299486141753,
        0.9857261155652807,
        0.9860612547705198,
        0.9863724577751997,
        0.9866714145114389,
        0.9869464072336924,
        0.9870664750852373,
        0.9872111591497017,
        0.9874041551747317,
        0.9874343747594648,
        0.9876239898772213,
        0.9878259053228896,
        0.987907522005274,
        0.988047020925892,
        0.9881193094588857,
        0.988319473690789,
        0.9884211509902642,
        0.9885083314908398,
        0.988669032218066,
        0.9887143128200481,
        0.9887614772630685,
        0.9888153490492456,
        0.9888810577642826,
        0.988961376121757,
        0.9891156324509189,
        0.9891754513621179,
        0.9892800530705906,
        0.9893284457086364
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 1.1323285033783692,
    "train_mae": 0.8391797887573091,
    "train_bias": -0.0006049628056011938,
    "train_r2": 0.9957823967968299,
    "val_rmse": 4.117164609368781,
    "val_mae": 1.9638274945609868,
    "val_bias": -0.39359955454238077,
    "val_r2": 0.9620050282148556,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        16.02955930815923,
        10.76884775702251,
        7.907978571414371,
        6.318045773686874,
        5.352965862593312,
        4.78998505555306,
        4.451688412443818,
        4.222894689692621,
        3.9846652120787773,
        3.7585148535452246,
        3.6694120836222073,
        3.541044877902328,
        3.3938059146724346,
        3.301145680311585,
        3.173472564650913,
        3.0431964182768376,
        2.9556120177538303,
        2.856871551827858,
        2.7872547058333397,
        2.7096920524087116,
        2.624309855323456,
        2.525693215896688,
        2.4460138814120027,
        2.386806915712953,
        2.327495848316194,
        2.275003730629429,
        2.201618954776863,
        2.1620581194968422,
        2.1079816480606195,
        2.0639368891507446,
        2.012039077666324,
        1.943132820375097,
        1.895578009356228,
        1.8544010120175018,
        1.8276622692473015,
        1.780922132656566,
        1.7304619347868895,
        1.7016843935271706,
        1.6730124534929625,
        1.624454467600471,
        1.5821131868600298,
        1.5508928465681941,
        1.5177919105291193,
        1.4809941441910766,
        1.4539305750437754,
        1.4338990297492582,
        1.4180244432836813,
        1.3915670248462957,
        1.3634939255950285,
        1.3439428181982964,
        1.312745258659784,
        1.2940115159450634,
        1.274684246937892,
        1.2561775198548883,
        1.2394780566474128,
        1.218460453441881,
        1.2031707014685686,
        1.1811434655255175,
        1.1559161070292316,
        1.14175367579748
      ],
      "train_r2": [
        0.15479121097606485,
        0.6185309449548303,
        0.7942917039892219,
        0.8686934547070978,
        0.905743830447945,
        0.9245274270310877,
        0.9348115946655301,
        0.941340096881161,
        0.9477718652951012,
        0.953532064176143,
        0.9557091706410149,
        0.9587538230278302,
        0.9621125964751361,
        0.9641532142946099,
        0.9668723724139396,
        0.9695364292485664,
        0.9712647032401032,
        0.9731525978630742,
        0.9744451018842346,
        0.9758475765584126,
        0.9773456783789765,
        0.9790163016477216,
        0.980319384626159,
        0.9812606115358743,
        0.9821803705430013,
        0.9829750805658674,
        0.9840557112681435,
        0.9846235681530121,
        0.9853831264364217,
        0.9859875632337974,
        0.9866833905883544,
        0.9875798793794283,
        0.9881803623522541,
        0.9886882929219553,
        0.9890121497593994,
        0.9895669641074671,
        0.9901498024607582,
        0.9904746954349983,
        0.9907929778791953,
        0.9913196762212036,
        0.9917662829241276,
        0.9920880337740079,
        0.9924221621733815,
        0.9927851464214903,
        0.9930464244413411,
        0.9932367104500325,
        0.9933856332275377,
        0.9936301515910072,
        0.9938845664142074,
        0.994058687160158,
        0.9943313224235365,
        0.9944919595406335,
        0.9946552662394715,
        0.9948093365240187,
        0.9949464272255557,
        0.9951163591758293,
        0.9952381541239674,
        0.9954109145721602,
        0.9956048523436019,
        0.9957118923843953
      ],
      "val_rmse": [
        23.840351437880763,
        16.117929486913447,
        11.920879373865237,
        9.714666577670805,
        8.378588622335446,
        7.55910146337136,
        7.090345440013594,
        6.765386581297382,
        6.417532536935358,
        6.0861107234753,
        6.0189739548931565,
        5.907557603455462,
        5.734656379337499,
        5.663756625982463,
        5.545297530575448,
        5.479445498464748,
        5.342214777889574,
        5.257393996475232,
        5.181628632638615,
        5.150785872457504,
        5.088443027261484,
        5.0246948283996495,
        4.935556797131848,
        4.902009643529335,
        4.856087036423623,
        4.791285612953979,
        4.76434481510129,
        4.770042955185412,
        4.732524430475128,
        4.718122072899242,
        4.708076283850998,
        4.646254424052188,
        4.595887093155834,
        4.555618885518751,
        4.525388615638264,
        4.497672904963172,
        4.464899838563327,
        4.450129341814976,
        4.422493220701488,
        4.391480819030936,
        4.373709424944695,
        4.353268592523762,
        4.343405439791187,
        4.328647979722937,
        4.308206678890337,
        4.297629356225115,
        4.294785923746513,
        4.281023888074104,
        4.263054464316987,
        4.245900836543683,
        4.21716275460751,
        4.20090260958659,
        4.188662176321833,
        4.1925053966403025,
        4.1766554518573855,
        4.1594529339043955,
        4.155770664185338,
        4.142700526955383,
        4.132714198807734,
        4.128064732897151
      ],
      "val_r2": [
        -0.27395759045767387,
        0.4176981534087336,
        0.6814730000459848,
        0.7884634274031719,
        0.8426483143539819,
        0.8719233339652304,
        0.8873154296222561,
        0.8974076684746928,
        0.9076863712754997,
        0.9169749085473592,
        0.9187965291527698,
        0.9217749959186053,
        0.9262869358561259,
        0.9280983542678897,
        0.9310745880627265,
        0.9327018869262833,
        0.9360305888283269,
        0.9380458056025291,
        0.93981860753529,
        0.940532914232191,
        0.941963729398414,
        0.9434087815149619,
        0.9453988270436158,
        0.946138556682629,
        0.9471429904782812,
        0.9485442651260432,
        0.9491212965469673,
        0.9489995222594649,
        0.9497986503099464,
        0.950103738061675,
        0.9503159893294594,
        0.9516122264370847,
        0.952655627357794,
        0.9534816358864139,
        0.9540969625338952,
        0.9546575063966058,
        0.9553158906508576,
        0.9556110438771281,
        0.9561606591074259,
        0.9567733435202761,
        0.9571224938919225,
        0.9575223393104486,
        0.9577146035944174,
        0.9580014591237225,
        0.9583971844132001,
        0.9586012165061585,
        0.9586559795832629,
        0.9589205172292444,
        0.9592646523818995,
        0.9595918136541953,
        0.9601369624376055,
        0.9604437702207466,
        0.9606739493203776,
        0.9606017506050194,
        0.960899081017057,
        0.9612205100020029,
        0.9612891408228017,
        0.9615322536660492,
        0.961717489610909,
        0.9618035798139957
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}