{
  "site_id": 2,
  "timestamp": "20251209_110313",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 1.5203505060103057,
    "train_mae": 1.071193261019883,
    "train_bias": -0.0026151644136114226,
    "train_r2": 0.9974530698175778,
    "val_rmse": 3.6475488999696966,
    "val_mae": 1.574526084529029,
    "val_bias": 0.25916701871585224,
    "val_r2": 0.9863817390932816,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        27.350502035182988,
        17.28253364960824,
        11.774973424546246,
        8.355810071586648,
        6.663918642994813,
        5.6560105754260475,
        5.0862456527228845,
        4.712894841988971,
        4.4526105509902205,
        4.246430298930616,
        4.053551512340156,
        3.9536507598117483,
        3.8123546636369205,
        3.7109753413169617,
        3.6001216038106034,
        3.5324832476100156,
        3.425920335744416,
        3.330710909192661,
        3.253741519498028,
        3.1788618503427064,
        3.131227141376509,
        3.0696976639393228,
        2.9887462313065845,
        2.9167671227941905,
        2.8491412446838824,
        2.778522176470797,
        2.723916465689088,
        2.666449279084993,
        2.6227796658690954,
        2.5762525999836905,
        2.5137936505176515,
        2.4624095521994014,
        2.4214480126797957,
        2.3792923092224254,
        2.3350999520501348,
        2.285952604889743,
        2.2305857552233883,
        2.1767911474818744,
        2.130109217895503,
        2.090942295414876,
        2.0549129814291334,
        2.0262555482715046,
        1.983045055337426,
        1.947378661656567,
        1.912193701277663,
        1.8892879543288077,
        1.8509989900114054,
        1.8191471033552913,
        1.7880478605825656,
        1.7652451354734984,
        1.733431258919663,
        1.711642696649533,
        1.6920358552871027,
        1.6629364009743184,
        1.6430127528248715,
        1.619344636631639,
        1.5980398212218805,
        1.5820167172853568,
        1.5590599451494533,
        1.539082325865494
      ],
      "train_r2": [
        0.17574764049440394,
        0.6708874705788892,
        0.8472259945004647,
        0.9230680547624791,
        0.9510684507209234,
        0.964750738736002,
        0.9714947891756295,
        0.9755259922558512,
        0.9781546495477814,
        0.9801309275225387,
        0.9818948975434851,
        0.982776309937804,
        0.9839853966451971,
        0.9848258025402142,
        0.9857188251959716,
        0.9862504078525335,
        0.9870674515556169,
        0.9877762777537481,
        0.988334705902059,
        0.9888654440258555,
        0.989196642703696,
        0.9896170490716426,
        0.990157448926294,
        0.990625823934198,
        0.9910554694146474,
        0.9914933742011879,
        0.9918244465172582,
        0.9921657712539733,
        0.992420279176148,
        0.9926868163401695,
        0.9930371210673343,
        0.9933188662119388,
        0.9935392952749478,
        0.9937622897740935,
        0.9939918530831171,
        0.9942421010644008,
        0.994517641353917,
        0.9947788866807508,
        0.9950004221239028,
        0.9951825891190905,
        0.9953471777091214,
        0.9954760475853106,
        0.9956669394560683,
        0.9958214037717682,
        0.995971036242919,
        0.9960669822601609,
        0.9962247826728335,
        0.9963535922361064,
        0.9964772009320422,
        0.9965664795308773,
        0.9966891245627598,
        0.9967718343145394,
        0.9968453679041624,
        0.9969529409268897,
        0.9970255171940657,
        0.9971105966732653,
        0.997186125081033,
        0.99724227008092,
        0.9973217246641021,
        0.9973899231423056
      ],
      "val_rmse": [
        29.08830219597019,
        18.649534516869643,
        13.02233267662545,
        9.392976136393303,
        7.663826685944926,
        6.637059296055648,
        6.086117581201113,
        5.741876275120676,
        5.5235567565791275,
        5.3752731343330336,
        5.151696125947874,
        5.052521995821485,
        4.953473349643024,
        4.862254084576316,
        4.789420277114218,
        4.690596998839356,
        4.618908630682347,
        4.555070040088166,
        4.535237772010263,
        4.502078788772502,
        4.4709108227924155,
        4.444318551846037,
        4.3860991728649665,
        4.341092196919286,
        4.292331721703595,
        4.240524086237521,
        4.2197321027819665,
        4.1963515898855945,
        4.182967795677093,
        4.150298117147993,
        4.121200406551748,
        4.092895551299319,
        4.070347225727859,
        4.046462412043192,
        4.031339242270179,
        4.0014862919202745,
        3.9647652452757463,
        3.935570673689022,
        3.909319551889083,
        3.879894449525334,
        3.857169424423764,
        3.846733633510929,
        3.8290165023928493,
        3.8101568722112673,
        3.802809184334607,
        3.7822810908668028,
        3.772426959983516,
        3.7600645400473938,
        3.7590370517055773,
        3.744188897918089,
        3.7230879360322433,
        3.717940219129878,
        3.716390322968268,
        3.710194755877656,
        3.7079067544967477,
        3.7031815776299326,
        3.6846811238339923,
        3.6714045507326794,
        3.663530726764828,
        3.6588195240166845
      ],
      "val_r2": [
        0.1339237057727357,
        0.64399557373149,
        0.8264210821584479,
        0.9096920793703893,
        0.9398811375699119,
        0.9549109795937747,
        0.9620859584549284,
        0.9662536299131022,
        0.9687710741521864,
        0.9704252910970377,
        0.9728343637635128,
        0.9738702153556635,
        0.974884659746288,
        0.9758011512935397,
        0.9765206915211163,
        0.9774796234739742,
        0.9781627398839795,
        0.9787622001760915,
        0.9789467316192779,
        0.9792534643386753,
        0.9795397272150566,
        0.9797823923331463,
        0.9803086133890128,
        0.9807106575297834,
        0.9811415514837664,
        0.9815940400219263,
        0.9817740923909317,
        0.9819755035293953,
        0.9820902944130708,
        0.9823689575399217,
        0.9826153131299935,
        0.9828532929408265,
        0.9830416996718212,
        0.9832401384860259,
        0.9833651803437697,
        0.9836106371041156,
        0.9839100623888186,
        0.9841461466682957,
        0.9843569386770579,
        0.9845915403057569,
        0.9847715102402135,
        0.9848538018547317,
        0.98499300005906,
        0.9851404684507227,
        0.985197724845373,
        0.985357102993059,
        0.9854333030712187,
        0.9855286181358911,
        0.9855365260557661,
        0.985650561507303,
        0.985811842768126,
        0.9858510500745958,
        0.9858628441492918,
        0.9859099407573084,
        0.9859273135028614,
        0.9859631577500291,
        0.9861030586801032,
        0.9862030246478003,
        0.9862621401511615,
        0.9862974504747898
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 1.453528685375731,
    "train_mae": 1.0605827157295449,
    "train_bias": 0.0008583226023368849,
    "train_r2": 0.9958741637071582,
    "val_rmse": 5.238617780301657,
    "val_mae": 2.7488677237002683,
    "val_bias": -0.2918422530133739,
    "val_r2": 0.9625664684945919,
    "best_iteration": 290,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286
      ],
      "train_rmse": [
        20.710020791082606,
        13.576595870430571,
        9.660854468938034,
        7.504088348705039,
        6.213060196007822,
        5.5018967087153445,
        5.086984167655523,
        4.828224956567506,
        4.592394547523574,
        4.387187456401869,
        4.293774655113653,
        4.159153710645903,
        4.006974458640386,
        3.9078890763919536,
        3.764083015414904,
        3.642735726858784,
        3.515868219632831,
        3.4044727651771574,
        3.305082755140203,
        3.22355441898917,
        3.147388206070998,
        3.0482175308709536,
        2.9600048902804987,
        2.889986326159351,
        2.815712466477953,
        2.75371438440984,
        2.6794931485468734,
        2.6325667741174628,
        2.5628810412656478,
        2.522253961933014,
        2.457015652579476,
        2.3807520804639033,
        2.3400974868620326,
        2.2905528896483385,
        2.2491012632845435,
        2.204293669984994,
        2.1364079980643105,
        2.1024412938706543,
        2.0679171925125766,
        2.0272914261446253,
        1.980959980776304,
        1.9361649473542555,
        1.8939448431856862,
        1.8578185362173885,
        1.821399990965635,
        1.7973401062254446,
        1.7740249503699377,
        1.7440048841330962,
        1.7126063391128667,
        1.67731633063065,
        1.653559846730504,
        1.6248006671563964,
        1.5967608767698012,
        1.571135558321057,
        1.5469917585540003,
        1.52207732115745,
        1.5046400075233257,
        1.4742183784903335
      ],
      "train_r2": [
        0.16242086973394043,
        0.6400463686516402,
        0.8177381149240276,
        0.8900334361201799,
        0.924616568913881,
        0.9408860958037182,
        0.9494657819721806,
        0.9544760674812646,
        0.9588146118704549,
        0.9624130435613178,
        0.9639966200113547,
        0.9662188274628475,
        0.9686456410340792,
        0.9701771438451314,
        0.972331656169765,
        0.9740868560126579,
        0.9758604063531129,
        0.9773658334933406,
        0.9786681041748467,
        0.9797075357146716,
        0.9806551483310993,
        0.9818550117729452,
        0.982890014757367,
        0.983689910144386,
        0.984517489430447,
        0.985191790015925,
        0.9859792876424551,
        0.9864660811135725,
        0.9871731010115278,
        0.987576544645766,
        0.988210900742906,
        0.9889313890462704,
        0.9893061847150882,
        0.989754210564614,
        0.9901216866833273,
        0.9905113662254579,
        0.9910868099218497,
        0.9913679780974154,
        0.9916491426388842,
        0.9919740371505458,
        0.9923366937461072,
        0.9926793526848058,
        0.9929951404512938,
        0.9932598220722368,
        0.9935214854571273,
        0.9936915116039934,
        0.9938541178957419,
        0.9940603593404037,
        0.9942723051513551,
        0.9945059231676157,
        0.9946604505433317,
        0.9948445692775965,
        0.9950209722801402,
        0.9951794999310221,
        0.995326515809216,
        0.9954758373718969,
        0.995578903561436,
        0.9957558725225832
      ],
      "val_rmse": [
        32.5500405579639,
        21.361714202528088,
        15.145809732724818,
        11.707601941445622,
        9.86925714686011,
        8.782313619364883,
        8.187360354560527,
        7.8405623539361375,
        7.532904664208163,
        7.220351233996042,
        7.110591492579983,
        6.968377678359408,
        6.814838627012291,
        6.783680752174608,
        6.64866102030106,
        6.524435958486384,
        6.4481480236437045,
        6.329123472518861,
        6.298503134607692,
        6.221610116019511,
        6.171919945437046,
        6.110804404432709,
        6.056741614685374,
        6.029947726857814,
        5.974709727248051,
        5.9286135423735775,
        5.865810973891989,
        5.860761819734819,
        5.820922371963011,
        5.804674293531962,
        5.787755822546005,
        5.715694344995045,
        5.694036804642826,
        5.677409901111366,
        5.651558418157943,
        5.626330984666117,
        5.579561861372785,
        5.569267648178744,
        5.555688810938847,
        5.529340659122185,
        5.500228034657828,
        5.481028955493244,
        5.443525715826174,
        5.399290653300561,
        5.388618556038498,
        5.383339379999413,
        5.382105228880548,
        5.368019114143742,
        5.353543111452133,
        5.335004754096954,
        5.327199146544265,
        5.296614669423699,
        5.2799498235134,
        5.287086250210318,
        5.26796678669615,
        5.265315250218975,
        5.263033083388769,
        5.23952649284239
      ],
      "val_r2": [
        -0.4452082880076602,
        0.3775570158863216,
        0.6870950965415586,
        0.8130337267642007,
        0.8671393707384991,
        0.8947928492412542,
        0.9085644278709002,
        0.9161463828251882,
        0.9225979759492624,
        0.9288878148241333,
        0.9310333972880049,
        0.9337645124788619,
        0.9366511802278492,
        0.9372291256503414,
        0.9397029926657499,
        0.9419351483721681,
        0.9432850736346339,
        0.9453595192357246,
        0.9458869422615921,
        0.9472001170709048,
        0.9480401433789991,
        0.9490640815694542,
        0.9499613633001409,
        0.9504031071075612,
        0.9513076206848972,
        0.9520560668826746,
        0.9530664394273854,
        0.9531472032952732,
        0.9537820167843318,
        0.954039675379059,
        0.9543071995167132,
        0.9554379288365125,
        0.9557749924860802,
        0.9560328943451628,
        0.9564323818489822,
        0.956820468117582,
        0.9575353479901326,
        0.9576918968135374,
        0.9578979542431575,
        0.9582963497067659,
        0.9587343428014715,
        0.9590219235634366,
        0.9595807795443348,
        0.9602350180837338,
        0.9603920595830071,
        0.9604696285786839,
        0.9604877514784066,
        0.9606943047530674,
        0.9609060112085935,
        0.9611762933377598,
        0.9612898156089305,
        0.9617330249311467,
        0.9619734464296601,
        0.9618705829113623,
        0.9621458558361294,
        0.9621839526533622,
        0.9622167270729656,
        0.9625534806144846
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}