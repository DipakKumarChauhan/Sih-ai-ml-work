{
  "site_id": 1,
  "timestamp": "20251209_110313",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 1.568994749367318,
    "train_mae": 1.0810087313177779,
    "train_bias": -0.0003685777813525917,
    "train_r2": 0.9975114904436139,
    "val_rmse": 3.777275344580537,
    "val_mae": 1.798273328099863,
    "val_bias": 0.5746583707816151,
    "val_r2": 0.9894378430349123,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        28.599025273483818,
        18.234574993935745,
        12.6923367331025,
        9.185873998010198,
        7.479672227589996,
        6.4138004469921235,
        5.734720590883735,
        5.2523784823871695,
        4.924983785753349,
        4.67039371133232,
        4.4011432857425365,
        4.280604767458214,
        4.099493007876292,
        3.9480472349782576,
        3.826551933279048,
        3.713590272231276,
        3.6087110116301226,
        3.513171353731855,
        3.4235301065676644,
        3.343271955060377,
        3.279104894824141,
        3.191813024713098,
        3.1085262854368425,
        3.032765647871026,
        2.949556203707033,
        2.8647567165818923,
        2.8130132577146556,
        2.7441969163836437,
        2.7045658307726503,
        2.646713744987971,
        2.5920354174671068,
        2.5354596740337647,
        2.4865931076362595,
        2.440172101750048,
        2.3972445416361765,
        2.3430371040537015,
        2.285555460104354,
        2.2300619658321987,
        2.184963737241821,
        2.1413138841691226,
        2.096471819150857,
        2.070645623173675,
        2.0272911359773604,
        1.9935337977709913,
        1.9595655849638984,
        1.9310250807630451,
        1.901727443111697,
        1.8716485400583993,
        1.84173139561106,
        1.8124191716281537,
        1.786102878639021,
        1.7666687525292168,
        1.7422816359900417,
        1.713345653819091,
        1.6941240641141584,
        1.6721220505160663,
        1.647403190068188,
        1.6338710059173245,
        1.6080452473101323,
        1.5875639183606456
      ],
      "train_r2": [
        0.17320318400556733,
        0.6638852099530833,
        0.8371530970061012,
        0.9147023040376361,
        0.9434462424209527,
        0.9584159083287875,
        0.966755419417311,
        0.9721125785925867,
        0.9754808199667525,
        0.9779502678539026,
        0.9804193390153342,
        0.9814772018495167,
        0.983011437493353,
        0.9842434543373282,
        0.9851983014160921,
        0.9860593089248597,
        0.9868356159990651,
        0.9875234360156329,
        0.988152011192794,
        0.9887010069122847,
        0.9891305654607544,
        0.9897015653463385,
        0.9902320051813904,
        0.9907023319483887,
        0.991205529741706,
        0.9917039411326716,
        0.9920009227599705,
        0.9923875075241327,
        0.9926057956938975,
        0.9929187442809392,
        0.9932083046749379,
        0.9935015505117701,
        0.993749629184514,
        0.9939808211542954,
        0.9941907373910258,
        0.9944504896642871,
        0.9947194414709707,
        0.9949727533431686,
        0.9951740279802662,
        0.9953649225189009,
        0.995557019671704,
        0.9956658105580504,
        0.9958454061355358,
        0.9959826142169517,
        0.9961183538787817,
        0.9962306005612742,
        0.9963441120224396,
        0.996458845037695,
        0.9965711466152932,
        0.9966794224501999,
        0.9967751518230059,
        0.9968449475188383,
        0.9969314510854261,
        0.997032530206208,
        0.9970987392994568,
        0.9971736087466224,
        0.9972565557600106,
        0.9973014413310644,
        0.997386076567451,
        0.997452238491035
      ],
      "val_rmse": [
        33.459119601046886,
        21.116622622720307,
        14.359970246558115,
        10.039863852692058,
        8.069643177939879,
        6.947792416476844,
        6.384439732100742,
        6.025034531462449,
        5.712625411914109,
        5.492814543879123,
        5.2354173915507,
        5.157599003098632,
        5.040699176195817,
        4.968185190085868,
        4.853564281779315,
        4.792965806470948,
        4.733079801773472,
        4.66964536688844,
        4.602216079613299,
        4.532158059725925,
        4.497223400037091,
        4.469800702688288,
        4.433341237004895,
        4.397897723877606,
        4.364181309478262,
        4.335748707894691,
        4.314354919056857,
        4.301259067106907,
        4.282828269471375,
        4.265835208739518,
        4.240186763165655,
        4.194468824050186,
        4.184170987794905,
        4.168592676595141,
        4.152050728279869,
        4.123037419311956,
        4.089933197323565,
        4.071711741192525,
        4.049853720172752,
        4.027405768174362,
        4.010366618645113,
        3.9848274475044474,
        3.9800296833993096,
        3.9575750292567657,
        3.9410822605609646,
        3.92456081573672,
        3.910895624467074,
        3.887931941711211,
        3.8782110892635497,
        3.871604504576926,
        3.856415798614189,
        3.8557449453990653,
        3.8558539777061145,
        3.8501779405988152,
        3.845439148648608,
        3.8309126059188543,
        3.813891487442928,
        3.803114761454472,
        3.796627656531827,
        3.7890968930266924
      ],
      "val_r2": [
        0.17124846050249887,
        0.6699009709873047,
        0.8473480312946191,
        0.9253807333448993,
        0.9517936785185418,
        0.96426539399816,
        0.9698254423048158,
        0.9731271077866867,
        0.9758416747267662,
        0.9776650388427521,
        0.9797092569054309,
        0.980307970575991,
        0.9811905156665361,
        0.9817277982718545,
        0.9825611877775119,
        0.9829939288827596,
        0.9834162407893456,
        0.9838577849514502,
        0.9843206035808608,
        0.9847943347760235,
        0.9850278471221842,
        0.9852098816775013,
        0.9854501789971027,
        0.9856818937727021,
        0.9859005913029971,
        0.9860837078912332,
        0.9862207027738813,
        0.986304227549726,
        0.9864213482304296,
        0.9865288870240679,
        0.9866903908739988,
        0.9869758535470362,
        0.9870397261819607,
        0.9871360527080678,
        0.987237944429375,
        0.9874156762628477,
        0.9876169462339182,
        0.9877270383214479,
        0.9878584536175489,
        0.9879926794449307,
        0.9880940656686367,
        0.9882452236688485,
        0.9882735123180726,
        0.9884054567802678,
        0.9885018934420584,
        0.9885980939996182,
        0.9886773578828111,
        0.9888099342718547,
        0.9888658205342299,
        0.9889037226718795,
        0.9889906155852489,
        0.9889944455864308,
        0.9889938231500554,
        0.9890262027410811,
        0.9890531991763621,
        0.9891357482991703,
        0.9892320756872999,
        0.9892928425033992,
        0.9893293384913502,
        0.9893716278800605
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 3.5008251079797543,
    "train_mae": 2.4358641679070008,
    "train_bias": 0.0004632459941427299,
    "train_r2": 0.9807850893160379,
    "val_rmse": 15.262015547864536,
    "val_mae": 6.284776176889259,
    "val_bias": -2.8148868646583405,
    "val_r2": 0.8613983757545235,
    "best_iteration": 100,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96
      ],
      "train_rmse": [
        23.096776093823117,
        15.089204836768968,
        10.698779030175235,
        8.326559491654395,
        6.906820530668406,
        6.115499761087246,
        5.60985438102195,
        5.320392060765063,
        5.019071754406254,
        4.770306815241172,
        4.664899506135485,
        4.523817961774655,
        4.357858291910797,
        4.241329805260865,
        4.0993487273619555,
        4.001482012499719,
        3.856249312676394,
        3.758898432232293,
        3.674353247767431,
        3.5846368772176156
      ],
      "train_r2": [
        0.16362649170730048,
        0.6430312091329595,
        0.8205406974793257,
        0.8913002066133492,
        0.9252082177314213,
        0.9413643900810318,
        0.95065982152295,
        0.955620253892835,
        0.960504797125665,
        0.9643228490869108,
        0.9658821131435427,
        0.9679145761197079,
        0.9702255500205683,
        0.9717965894861864,
        0.9736532367065761,
        0.9748962108897116,
        0.9766854118634636,
        0.9778477052247568,
        0.9788329978986456,
        0.97985404421182
      ],
      "val_rmse": [
        47.805400136713786,
        33.77575275486312,
        25.931964062176167,
        21.965919537850535,
        19.241553458170074,
        17.785436823067197,
        16.945975924951206,
        16.52355768653217,
        16.10346813825581,
        15.947262949808913,
        15.83192256026556,
        15.74546185436298,
        15.602257724823193,
        15.588291544406694,
        15.305018708605138,
        15.391295027134795,
        15.321757947130953,
        15.320711783078435,
        15.277480351504769,
        15.221866261993036
      ],
      "val_r2": [
        -0.35987331521044785,
        0.3211800301242045,
        0.5998568758989811,
        0.7128933093539525,
        0.7796947738224675,
        0.8117766022517997,
        0.8291253230290864,
        0.8375380512348696,
        0.8456938011385156,
        0.8486728520954372,
        0.8508539176170068,
        0.8524784915014656,
        0.8551496891968144,
        0.8554088952905369,
        0.8606162110441964,
        0.8590403338643643,
        0.8603111536713561,
        0.8603302288272182,
        0.8611173469664178,
        0.8621266461072056
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}