{
  "site_id": 5,
  "timestamp": "20251209_110313",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 1.6361714773714429,
    "train_mae": 1.1710993420092441,
    "train_bias": 4.7030235992455336e-05,
    "train_r2": 0.9974166214966073,
    "val_rmse": 2.875091442329971,
    "val_mae": 1.5260633757997444,
    "val_bias": 0.22552837136498205,
    "val_r2": 0.9913061901590592,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        29.232296597065993,
        18.523604640362976,
        12.746762490767123,
        9.084699232753634,
        7.28861999984107,
        6.18278864867502,
        5.554213861776073,
        5.149147798632838,
        4.853336714489268,
        4.613868019002188,
        4.373351016788284,
        4.2676427289958845,
        4.144960723909493,
        3.9966028037972188,
        3.897032199485661,
        3.773337409861086,
        3.673450176982498,
        3.572588047279866,
        3.4911966586676457,
        3.4089994914798663,
        3.340208354808963,
        3.2717323046870375,
        3.2024418294521206,
        3.138187567351259,
        3.061819666194689,
        2.9777873959608776,
        2.9319084055528175,
        2.8829129657326873,
        2.8325596363336865,
        2.7758921366108673,
        2.7125688831738657,
        2.647829399069233,
        2.599769988391692,
        2.5494834818063863,
        2.4993310707793284,
        2.4447703374788134,
        2.407350891033021,
        2.3595496150115545,
        2.307899886595721,
        2.2586257572049684,
        2.2192642232048785,
        2.1889555019825173,
        2.1439251255305045,
        2.095799244278982,
        2.0658540510425984,
        2.036830079517966,
        2.0026961571240194,
        1.9655217642982896,
        1.9310295568690632,
        1.9021812129533522,
        1.8699684392544298,
        1.8521105986140154,
        1.8295097688278532,
        1.8048657413474822,
        1.781954917552996,
        1.7551948001588764,
        1.7260633436898312,
        1.7069080794662441,
        1.6813217483533707,
        1.6542607721353328
      ],
      "train_r2": [
        0.1753754134926101,
        0.6688830504455878,
        0.8432057277156534,
        0.9203562842384958,
        0.9487349927445826,
        0.9631108024450471,
        0.9702302215660924,
        0.9744140750334369,
        0.9772693815541139,
        0.979457147831815,
        0.9815430864041308,
        0.9824245474726492,
        0.9834205069983186,
        0.984586105440964,
        0.9853445757599678,
        0.9862601595694336,
        0.9869779693223044,
        0.9876832454127865,
        0.9882380580165865,
        0.9887853873110304,
        0.9892334261825292,
        0.9896703422889188,
        0.9901032430234288,
        0.9904963988503944,
        0.9909533117901935,
        0.9914430739047528,
        0.9917047170644552,
        0.9919796472624814,
        0.9922573695573925,
        0.9925640650880709,
        0.9928994505325136,
        0.9932343363072565,
        0.9934777076958731,
        0.9937275846151192,
        0.9939719342202088,
        0.9942322484895539,
        0.994407458698682,
        0.9946273489541417,
        0.9948599855726463,
        0.9950771232893849,
        0.9952472121378038,
        0.9953761442961916,
        0.9955644279893117,
        0.9957613284466793,
        0.9958815890623547,
        0.9959964984015528,
        0.9961295582536385,
        0.9962719122960894,
        0.9964016098532399,
        0.9965083220334354,
        0.9966255813725449,
        0.9966897237333708,
        0.9967700197118611,
        0.9968564511796187,
        0.9969357525649328,
        0.997027094848194,
        0.9971249601710566,
        0.9971884185160712,
        0.997272077249185,
        0.9973591827446306
      ],
      "val_rmse": [
        28.820976186765645,
        18.267500145376562,
        12.740705599336703,
        9.085832859618046,
        7.377878248211434,
        6.313614779606117,
        5.771290876996234,
        5.422666067759411,
        5.183733159549437,
        4.964540757402179,
        4.7276351650783015,
        4.6640996446535175,
        4.577038937871528,
        4.463703933848592,
        4.399823406537983,
        4.315701410323861,
        4.2412434862635,
        4.179816247368086,
        4.102787949392708,
        4.04888005129531,
        3.9985846633756887,
        3.951777660157315,
        3.9042044642899163,
        3.8718335715050793,
        3.821708549440683,
        3.764133785534422,
        3.7370808436343323,
        3.7040162479400998,
        3.6626622692874564,
        3.6315859944060525,
        3.5925974468278166,
        3.5583504550419778,
        3.5174425546363475,
        3.479919720981665,
        3.4485520294050187,
        3.416448772674502,
        3.387998755248065,
        3.3610913015653225,
        3.327808018350537,
        3.2885381958376443,
        3.2480079111639912,
        3.2335946948899332,
        3.198815207309348,
        3.1696582878248125,
        3.1548629918892104,
        3.1341344090085945,
        3.1126276418726704,
        3.0831518927204393,
        3.0653339253790093,
        3.040855417017093,
        3.0205742024103897,
        3.0125169188061114,
        2.999690090510922,
        2.9870413584961537,
        2.975372049680477,
        2.960836070960044,
        2.942343331871824,
        2.9289242545240612,
        2.906473058764154,
        2.885219511788535
      ],
      "val_r2": [
        0.12637674529245035,
        0.64903399545749,
        0.829276315970996,
        0.9131766978209198,
        0.9427507527197325,
        0.9580759748226301,
        0.964968983467555,
        0.9690733745416945,
        0.9717387030954884,
        0.9740782108541027,
        0.9764931345545862,
        0.9771207147432479,
        0.9779668786263018,
        0.9790445218309066,
        0.9796400220063596,
        0.9804111206274125,
        0.9810812157727747,
        0.9816252604369613,
        0.9822962627581846,
        0.9827584369547733,
        0.9831841275505234,
        0.9835755129051718,
        0.9839685826589252,
        0.9842333228428706,
        0.9846389132972879,
        0.9850982623133868,
        0.9853116910553285,
        0.9855704569290212,
        0.9858908593799108,
        0.9861292649004031,
        0.9864254973534873,
        0.9866830659172562,
        0.9869874970912748,
        0.9872636418470688,
        0.9874922158438669,
        0.9877240068052934,
        0.9879276088892257,
        0.9881186050498765,
        0.9883527515293449,
        0.9886260165061468,
        0.9889046509463426,
        0.9890029049184343,
        0.989238195045143,
        0.9894334867496322,
        0.9895319010313705,
        0.9896690074669082,
        0.9898103057578115,
        0.9900023793330511,
        0.9901176007328095,
        0.9902748041670806,
        0.9904040974134516,
        0.9904552226520541,
        0.9905363299660814,
        0.9906159722271373,
        0.9906891491310458,
        0.9907799019679686,
        0.9908947157536795,
        0.9909775788853937,
        0.9911153685745624,
        0.9912448309981471
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 2.0566684633504755,
    "train_mae": 1.5313832937056464,
    "train_bias": 0.0013899371232300943,
    "train_r2": 0.9959064599624295,
    "val_rmse": 5.846740987826987,
    "val_mae": 3.533090834900185,
    "val_bias": -0.38588131053359415,
    "val_r2": 0.9729640963181068,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        29.30497188117336,
        18.831546198846127,
        13.052542866684325,
        9.965641176377396,
        8.127061168333816,
        7.1274077652498145,
        6.593408812640015,
        6.2646872988018725,
        5.989475000766942,
        5.734743814165551,
        5.625252342564487,
        5.470527025404681,
        5.278756685627136,
        5.145704058035746,
        4.961637331926863,
        4.820798714670631,
        4.703142739674533,
        4.593850459796791,
        4.498741004066789,
        4.390513937245276,
        4.280313740913567,
        4.188663589770588,
        4.059070122003753,
        3.9670359761120078,
        3.8818768331387488,
        3.798372147700218,
        3.7129547130435983,
        3.6521597781386115,
        3.564744730661166,
        3.505474784715193,
        3.4395237720704084,
        3.3659061470941594,
        3.281065366697837,
        3.2178040624141016,
        3.1619340283549877,
        3.1064180221276207,
        3.043492864047644,
        2.9962984467361626,
        2.9567007007626906,
        2.8883129195227237,
        2.8334873389071427,
        2.768245053749863,
        2.708319454189175,
        2.6598320999013465,
        2.617800951518752,
        2.5865454975088085,
        2.556018160637942,
        2.5097794872941273,
        2.4710420445873016,
        2.4277994896655892,
        2.3737527699066034,
        2.3374126892641405,
        2.31141267740002,
        2.2841901769768413,
        2.242141776614487,
        2.202060991444661,
        2.1742048999074033,
        2.136058536339511,
        2.103012433755751,
        2.078167923264114
      ],
      "train_r2": [
        0.16890038136986185,
        0.656803835913947,
        0.8351227552476835,
        0.9038872603544774,
        0.9360798887779231,
        0.9508375319956954,
        0.9579282600397218,
        0.9620187493400728,
        0.965282537253271,
        0.9681727945013928,
        0.9693765241076836,
        0.9710379832243596,
        0.9730329305280375,
        0.9743752241261315,
        0.976175680852807,
        0.9775090157160023,
        0.9785934448311963,
        0.9795767820196829,
        0.9804136979601653,
        0.98134474519619,
        0.9822694718773589,
        0.9830206356265189,
        0.98405503490041,
        0.9847699004161449,
        0.9854167618391824,
        0.9860374259145959,
        0.9866583430570833,
        0.9870916716685012,
        0.9877022025298597,
        0.988107746449267,
        0.9885510121149306,
        0.9890358625988297,
        0.9895816191244148,
        0.9899794939105794,
        0.9903244408142802,
        0.9906612175325752,
        0.9910357276916973,
        0.9913115840676603,
        0.9915397110998715,
        0.9919265538893934,
        0.9922301431452751,
        0.9925838324985247,
        0.9929014402260538,
        0.993153337646933,
        0.9933680123702986,
        0.9935254333011999,
        0.9936773617349242,
        0.9939040471967274,
        0.9940907721643133,
        0.9942957822381261,
        0.9945469254624313,
        0.9947126110411106,
        0.9948295844760923,
        0.9949506557100497,
        0.9951348458360246,
        0.9953072312639114,
        0.9954252074484952,
        0.9955843284204895,
        0.995719897734736,
        0.995820428690335
      ],
      "val_rmse": [
        46.02412763857756,
        30.021523595440836,
        21.023727549138144,
        16.05102635997458,
        13.087518707292915,
        11.268239398126122,
        10.295690205374884,
        9.709136487065903,
        9.236489907513414,
        8.764409820492716,
        8.66437851736356,
        8.40943568633784,
        8.202451576586142,
        8.138427292668213,
        7.969130632495045,
        7.8143092457099845,
        7.66460713633922,
        7.536681476646762,
        7.458090586093344,
        7.378484115758022,
        7.303896828392128,
        7.226658708391165,
        7.095335751742043,
        7.079605507602579,
        7.031348095038733,
        6.95404989934974,
        6.909972678604749,
        6.871734650062374,
        6.809422439029213,
        6.792203147767677,
        6.718095357418712,
        6.594102116008262,
        6.568523818889529,
        6.547342509682369,
        6.520882571850952,
        6.500137333252806,
        6.431954339665967,
        6.4048953194771,
        6.395409845899238,
        6.346795020653866,
        6.289477248974634,
        6.250434033566164,
        6.2220310840826745,
        6.181356684537846,
        6.150341404217724,
        6.137981697225336,
        6.137062489131606,
        6.1265893398033295,
        6.096389244287669,
        6.074531653157994,
        6.056136630693799,
        6.048249616700595,
        6.025205467274844,
        5.99574915737459,
        5.971174594734623,
        5.9389861525155725,
        5.920724322613376,
        5.8883258172011566,
        5.859896452568741,
        5.847540191102581
      ],
      "val_r2": [
        -0.67526807218326,
        0.28718203160965683,
        0.6504312348755086,
        0.7962400634630813,
        0.8645347784267823,
        0.8995788221192297,
        0.9161652423288457,
        0.925445408788692,
        0.9325274535755687,
        0.9392482861271261,
        0.9406271338395227,
        0.9440697336145741,
        0.9467891089964966,
        0.9476165429179112,
        0.9497732505397585,
        0.9517058675347434,
        0.9535385264956099,
        0.955076508488403,
        0.9560085285469286,
        0.956942632471063,
        0.9578087453199439,
        0.9586963653497077,
        0.9601838665819584,
        0.960360214327402,
        0.96089877368604,
        0.9617537564651887,
        0.9622370562929037,
        0.9626538409246574,
        0.9633280726313486,
        0.9635133060186833,
        0.9643051543205103,
        0.9656106064333783,
        0.9658768795661953,
        0.9660965962131693,
        0.9663700718272397,
        0.9665837088995343,
        0.967281070485095,
        0.9675557863257102,
        0.9676518131403651,
        0.9681417346339196,
        0.9687145589613249,
        0.9691017748964408,
        0.9693819495993774,
        0.9697809512133788,
        0.9700834417379375,
        0.9702035613657417,
        0.9702124851710073,
        0.9703140656575797,
        0.9706060089813245,
        0.9708164056786794,
        0.970992886790154,
        0.9710683905477236,
        0.9712884324719886,
        0.9715684791845095,
        0.9718010640771007,
        0.9721042651704367,
        0.9722755549935894,
        0.9725781439847359,
        0.9728422951245694,
        0.9729567046243096
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 300,
      "max_depth": 5,
      "learning_rate": 0.1,
      "subsample": 0.7,
      "colsample_bytree": 0.7,
      "min_child_weight": 5,
      "gamma": 0.3,
      "reg_alpha": 0.5,
      "reg_lambda": 2.0,
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}